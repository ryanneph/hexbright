Button press (less than 250 ms): Cycle between 3 brightnesses (high, medium, then low) and off.

If held for over 250 ms, go to strobe (15 hz or so, right where it's most uncomfortable).  Upon release of strobe, go to the previous light state.

If held for over 250ms from power off state, momentarily turn on light at full brightness, when button is released return to power off state.